{"version":3,"sources":["scripts/app.js"],"names":["MainController","$scope","$localStorage","microgear","apply","$apply","is_connected","status","$storage","$default","appId","appKey","appSecret","onText","offText","chatWith","alias","$watch","newVal","oldVal","console","log","arguments","undefined","text","true","false","chat","doDisconnect","disconnect","doConnect","Microgear","create","key","secret","subscribe","on","setAlias","topic","body","message","event","connect","$inject","angular","module","component","templateUrl","controller","run","$templateCache","put"],"mappings":"AAkBA,QAASA,gBAAeC,EAAQC,GAC5B,GAKIC,GALAC,EAAQ,SAAUH,GAClBA,EAAOI,SAMXJ,GAAOK,cAAe,EAEtBL,EAAOM,OAAS,YAEhBN,EAAOO,SAAWN,EAAcO,UAC5BC,MAAO,GACPC,OAAQ,GACRC,UAAW,GACXC,OAAQ,KACRC,QAAS,MACTC,SAAU,UACVC,MAAO,cAGXR,SAAWP,EAAOO,SAElBP,EAAOgB,OAAO,SAAU,SAASC,EAAQC,GAErC,GADAC,QAAQC,IAAI,iBAAkBC,WACfC,SAAXL,EAAJ,CAGA,GAAIM,IACAC,OAAMjB,SAASK,OACfa,QAAOlB,SAASM,QAGpBM,SAAQC,IAAIb,SAASO,SAAUS,EAAKN,IACpCf,EAAUwB,KAAKnB,SAASO,SAAUS,EAAKN,OAG3CjB,EAAO2B,aAAe,WAClBzB,EAAU0B,aACV5B,EAAOK,cAAe,EACtBL,EAAOM,OAAS,iBAGpBN,EAAO6B,UAAY,WASf,MARA3B,GAAY4B,UAAUC,QAClBC,IAAKhC,EAAOO,SAASG,OACrBuB,OAAQjC,EAAOO,SAASI,UACxBF,MAAOT,EAAOO,SAASE,QAG3BU,QAAQC,IAAIlB,GAEPA,GAKLF,EAAOM,OAAS,eAChBJ,EAAUgC,UAAU,MACpBhC,EAAUiC,GAAG,YAAa,WAEtBhB,QAAQC,IAAI,gBACZpB,EAAOM,OAAS,cAChBJ,EAAUkC,SAASpC,EAAOe,OAAS,UACnCf,EAAOK,cAAe,EACtBF,EAAMH,KAGVE,EAAUiC,GAAG,UAAW,SAAUE,EAAOC,GACrCnB,QAAQC,IAAI,cAAgBiB,EAAQ,MAAQC,GAC5CtC,EAAOqC,MAAQA,EACfrC,EAAOuC,QAAUD,EACjBnC,EAAMH,KAGVE,EAAUiC,GAAG,SAAU,WACnBnC,EAAOK,cAAe,EACtBc,QAAQC,IAAI,aACZjB,EAAMH,KAIVE,EAAUiC,GAAG,UAAW,SAAUK,GAC9BrB,QAAQC,IAAIoB,KAGhBtC,EAAUiC,GAAG,SAAU,SAAUK,GAC7BrB,QAAQC,IAAIoB,SAIhBtC,GAAUuC,QAAQzC,EAAOO,SAASE,YAtC9BU,SAAQC,IAAI,iBAvExBrB,eAAe2C,SAAW,SAAU,iBADpCC,QACGC,OAAO,OAAQ,YAAa,cAE/BD,QACGC,OAAO,OACPC,UAAU,iBACTC,YAAa,mBAGjBH,QACKC,OAAO,OACPC,UAAU,OACPC,YAAa,gBACbC,WAAYhD,iBAsGpB4C,QACGC,OAAO,OACPC,UAAU,kBACTC,YAAa,oBAGjBH,QACGC,OAAO,OACPC,UAAU,kBACTC,YAAa,oBAGjBH,QAAQC,OAAO,OAAOI,KAAK,iBAAkB,SAASC,GAAiBA,EAAeC,IAAI,kBAAkB,oMAC5GD,EAAeC,IAAI,kBAAkB,+IACrCD,EAAeC,IAAI,gBAAgB,gyGACnCD,EAAeC,IAAI,iBAAiB","file":"scripts/app-e91d398c0a.js","sourcesContent":["angular\n  .module('app', ['ngStorage', 'ngAnimate']);\n\nangular\n  .module('app')\n  .component('fountainTitle', {\n    templateUrl: 'app/title.html'\n  });\n\nangular\n    .module('app')\n    .component('app', {\n        templateUrl: 'app/main.html',\n        controller: MainController\n    });\n\n\n/** @ngInject */\nfunction MainController($scope, $localStorage) {\n    var apply = function ($scope) {\n        $scope.$apply()\n        // _.defer(function () {\n        // });\n    };\n    var microgear;\n    var vm = this;\n    $scope.is_connected = false;\n\n    $scope.status = 'Waiting..';\n\n    $scope.$storage = $localStorage.$default({\n        appId: '',\n        appKey: '',\n        appSecret: '',\n        onText: 'ON',\n        offText: 'OFF',\n        chatWith: 'plug001',\n        alias: 'html5gear'\n    });\n\n    $storage = $scope.$storage;\n\n    $scope.$watch('switch', function(newVal, oldVal) {\n        console.log(\"SWITCH CHANGED\", arguments);\n        if (newVal === undefined) {\n            return;\n        }\n        var text= {\n            true: $storage.onText,\n            false: $storage.offText,\n        };\n\n        console.log($storage.chatWith, text[newVal]);\n        microgear.chat($storage.chatWith, text[newVal]);\n    });\n\n    $scope.doDisconnect = function () {\n        microgear.disconnect();\n        $scope.is_connected = false;\n        $scope.status = 'Disconnected.';\n    };\n\n    $scope.doConnect = function () {\n        microgear = Microgear.create({\n            key: $scope.$storage.appKey,\n            secret: $scope.$storage.appSecret,\n            appId: $scope.$storage.appId\n        });\n\n        console.log(microgear);\n\n        if (!microgear) {\n            console.log(\"no microgear\");\n            return;\n        }\n\n        $scope.status = 'Connecting..';\n        microgear.subscribe('/#');\n        microgear.on('connected', function () {\n            // this.status = \"connected\";\n            console.log('Connected...');\n            $scope.status = 'Connected..';\n            microgear.setAlias($scope.alias || 'mygear');\n            $scope.is_connected = true;\n            apply($scope);\n        });\n\n        microgear.on('message', function (topic, body) {\n            console.log('incoming : ' + topic + ' : ' + body);\n            $scope.topic = topic;\n            $scope.message = body;\n            apply($scope);\n        });\n\n        microgear.on('closed', function () {\n            $scope.is_connected = false;\n            console.log('Closed...');\n            apply($scope);\n        });\n\n\n        microgear.on('present', function (event) {\n            console.log(event);\n        });\n\n        microgear.on('absent', function (event) {\n            console.log(event);\n        });\n\n\n        microgear.connect($scope.$storage.appId)\n\n    };\n}\n\nangular\n  .module('app')\n  .component('fountainHeader', {\n    templateUrl: 'app/header.html'\n  });\n\nangular\n  .module('app')\n  .component('fountainFooter', {\n    templateUrl: 'app/footer.html'\n  });\n\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/footer.html\",\"<!--<footer class=\\\"footer\\\">-->\\n  <!--Build with â™¥ by the&nbsp;-->\\n  <!--<a href=\\\"https://github.com/orgs/FountainJS/people\\\">-->\\n    <!--FountainJS team-->\\n  <!--</a>-->\\n<!--</footer>-->\\n\");\n$templateCache.put(\"app/header.html\",\"<header class=\\\"header\\\">\\n  <p class=\\\"header-title\\\">\\n    <a href=\\\"https://cmmakerclub.com\\\" target=\\\"_blank\\\">CMMC OK</a>\\n  </p>\\n</header>\\n\");\n$templateCache.put(\"app/main.html\",\"<div class=\\\"main-container\\\">\\n    <fountain-header></fountain-header>\\n    <main class=\\\"main\\\">\\n        <div class=\\\"nat-settings\\\" ng-hide=\\\"is_connected\\\">\\n            <table>\\n                <tr>\\n                    <td>appId</td>\\n                    <td>\\n                        <input id=\\\"appId\\\" type=\\\"text\\\" ng-model=\\\"$storage.appId\\\" placeholder=\\\"APP ID\\\">\\n                    </td>\\n                </tr>\\n                <tr>\\n                    <td>appKey</td>\\n                    <td>\\n                        <input type=\\\"text\\\" ng-model=\\\"$storage.appKey\\\" placeholder=\\\"APP KEY\\\">\\n                    </td>\\n                </tr>\\n                <tr>\\n                    <td>appSecret</td>\\n                    <td>\\n                        <input type=\\\"text\\\" ng-model=\\\"$storage.appSecret\\\" placeholder=\\\"APP SECRET\\\">\\n                    </td>\\n                </tr>\\n                <tr>\\n                    <td>alias</td>\\n                    <td>\\n                        <input type=\\\"text\\\" ng-model=\\\"$storage.alias\\\" placeholder=\\\"\\\">\\n                    </td>\\n                </tr>\\n                <tr>\\n                    <td>chat with</td>\\n                    <td>\\n                        <input type=\\\"text\\\" ng-model=\\\"$storage.chatWith\\\" placeholder=\\\"Chat With\\\">\\n                    </td>\\n                </tr>\\n                <!--<tr>-->\\n                    <!--<td>ON&nbsp; Text</td>-->\\n                    <!--<td>-->\\n                        <!--<input type=\\\"text\\\" ng-model=\\\"$storage.onText\\\" placeholder=\\\"ON\\\">-->\\n                    <!--</td>-->\\n                <!--</tr>-->\\n                <!--<tr>-->\\n                    <!--<td>OFF Text</td>-->\\n                    <!--<td>-->\\n                        <!--<input type=\\\"text\\\" ng-model=\\\"$storage.offText\\\" placeholder=\\\"OFF\\\">-->\\n                    <!--</td>-->\\n                <!--</tr>-->\\n            </table>\\n            <div>\\n                <button ng-hide=\\\"is_connected\\\" ng-click=\\\"doConnect()\\\">Connect</button>\\n                <button ng-show=\\\"is_connected\\\" ng-click=\\\"doDisconnect()\\\">Disconnect</button>\\n            </div>\\n            <div>status: {{status}}</div>\\n        </div>\\n\\n        <div class=\\\"the-container\\\" ng-show=\\\"is_connected\\\">\\n            <input ng-model=\\\"switch\\\" type=\\\"checkbox\\\" id=\\\"toggle\\\">\\n            <label for=\\\"toggle\\\"></label>\\n\\n            <div class=\\\"day-night-cont\\\">\\n                <span class=\\\"the-sun\\\"></span>\\n                <div class=\\\"the-moon\\\"><span class=\\\"moon-inside\\\"></span></div>\\n            </div>\\n\\n            <div class=\\\"switch\\\">\\n                <div class=\\\"button\\\">\\n                    <div class=\\\"b-inside\\\"></div>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"c-window\\\">\\n                <span class=\\\"the-sun\\\"></span>\\n                <span class=\\\"the-moon\\\"></span>\\n\\n                <div class=\\\"the-fox\\\">\\n                    <div type=\\\"button\\\" class=\\\"fox-face\\\">\\n                        <section class=\\\"eyes left\\\"></section>\\n                        <section class=\\\"eyes right\\\"></section>\\n                        <span class=\\\"nose\\\"></span>\\n                        <div class=\\\"white-part\\\"><span class=\\\"mouth\\\"></span></div>\\n                    </div>\\n                </div>\\n            </div>\\n\\n        </div>\\n    </main>\\n    <fountain-footer></fountain-footer>\\n</div>\\n\");\n$templateCache.put(\"app/title.html\",\"<div class=\\\"title\\\">\\n  <h1 class=\\\"title-h1\\\">\\'Allo, \\'Allo!</h1>\\n  <div>\\n    <img class=\\\"title-logo\\\" src=\\\"http://fountainjs.io/assets/imgs/yeoman.png\\\">\\n    <img class=\\\"title-logo\\\" src=\\\"http://fountainjs.io/assets/imgs/fountain.png\\\">\\n  </div>\\n  <h2 class=\\\"title-h2\\\">Always a pleasure scaffolding your apps.</h2>\\n</div>\\n\");}]);"],"sourceRoot":"/source/"}